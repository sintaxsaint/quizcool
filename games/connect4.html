<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quizcool â€” Connect 4</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#0b0f1a; --card:#121826; --muted:#8aa0b6; --text:#e6eef8; --accent:#4f9cf0; --accent2:#7c4dff }
    * { box-sizing: border-box }
    html,body { height:100% }
    body { margin:0; background: radial-gradient(1200px 600px at 80% -10%, #1b2a40 0%, #0b0f1a 45%), var(--bg); color: var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif }
    .topbar { position: sticky; top:0; z-index:10; display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 16px; background:#0e1524cc; backdrop-filter: blur(6px); border-bottom:1px solid #22314b }
    .brand { display:flex; align-items:center; gap:10px }
    .logo { width:32px; height:32px; border-radius:10px; background: linear-gradient(135deg, var(--accent), var(--accent2)); display:grid; place-items:center; font-weight:700 }
    .title { font-weight:700 }
    .btn { background:#1a2233; border:1px solid #28324a; color:var(--text); padding:8px 12px; border-radius:10px; font-weight:600; text-decoration:none }
    .btn:hover { background:#212a3f }
    .wrap { height: calc(100vh - 58px); display:flex; align-items:center; justify-content:center; padding:16px }
    .panel { display:flex; flex-direction:column; gap:12px; align-items:center }
    .status { color: var(--muted) }
    .board { width: 560px; height: 480px; background:#0f1624; border:1px solid #22314b; border-radius:14px; padding:12px; display:grid; grid-template-columns: repeat(7, 1fr); gap:8px; position:relative }
    .cell { background:#121826; border:1px solid #22314b; border-radius:50%; width:100%; padding-top:100%; position:relative; cursor:pointer }
    .cell > span { position:absolute; inset:8%; border-radius:50% }
    .p1 { background:#ef4444 }
    .p2 { background:#3b82f6 }
    .chip { position:absolute; width:64px; height:64px; border-radius:50%; left:0; top:0; transform:translate(-50%,-50%); will-change: transform }
    .chip.p1 { background:#ef4444 }
    .chip.p2 { background:#3b82f6 }
  </style>
</head>
<body>
  <script>(function(){var u=sessionStorage.getItem('qc_user');if(!u){location.href='../auth.html';return}try{var me=JSON.parse(u)}catch(e){sessionStorage.removeItem('qc_user');location.href='../auth.html';return}var banned=[];try{banned=JSON.parse(localStorage.getItem('qc_banned')||'[]')}catch(e){}if(me.email!=='ereadman2013@gmail.com'&&Array.isArray(banned)&&banned.indexOf(me.email)>-1){sessionStorage.removeItem('qc_user');location.href='../auth.html';return}if(me.email==='ereadman2013@gmail.com'&&confirm('Open dev panel?')){var Q=[{q:'This project started on a?',a:['laptop']},{q:'Site name?',a:['quizcool']},{q:'Hosting platform used?',a:['github pages','github','pages']},{q:'Primary dev email?',a:['ereadman2013@gmail.com']},{q:'Main homepage file name?',a:['index.html']},{q:'Auth page file name?',a:['auth.html']},{q:'Games folder name?',a:['games']},{q:'Brand acronym shown in the logo?',a:['qc']},{q:'Primary languages used?',a:['html','javascript','js']}];var q=Q[Math.floor(Math.random()*Q.length)];var a=(prompt(q.q)||'').trim().toLowerCase();var ok=false;for(var i=0;i<q.a.length;i++){if(a===q.a[i].toLowerCase()){ok=true;break}}if(!ok){alert('Incorrect answer');return}location.href='../dev.html'}})()</script>
  <div class="topbar">
    <div class="brand">
      <div class="logo">QC</div>
      <div>
        <div class="title">Connect 4</div>
        <small style="color:var(--muted)">Quizcool</small>
      </div>
    </div>
    <div style="display:flex;gap:8px">
      <a class="btn" href="../index.html">Back</a>
      <a class="btn" href="#" onclick="sessionStorage.removeItem('qc_user');location.href='../auth.html'">Sign Out</a>
    </div>
  </div>
  <div class="wrap">
    <div class="panel">
      <div class="status" id="status">Turn: Player 1</div>
      <div class="board" id="board"></div>
      <div class="actions"><a class="btn" href="#" id="reset">Reset</a></div>
    </div>
  </div>
  <script>
    var rows=6, cols=7
    var grid=[], turn=1, over=false
    function reset(){grid=[];for(var r=0;r<rows;r++){grid[r]=[];for(var c=0;c<cols;c++){grid[r][c]=0}}turn=1;over=false;render();setStatus()}
    function setStatus(){document.getElementById('status').textContent=over?('Winner: Player '+(turn===1?2:1)):'Turn: Player '+turn}
    function render(){var b=document.getElementById('board');b.innerHTML='';for(var r=0;r<rows;r++){for(var c=0;c<cols;c++){var cell=document.createElement('div');cell.className='cell';cell.dataset.col=c;var span=document.createElement('span');var v=grid[r][c];if(v===1)span.className='p1';else if(v===2)span.className='p2';cell.appendChild(span);b.appendChild(cell)}}}
    var animating=false
    function drop(col){if(over||animating)return;var targetRow=-1;for(var r=rows-1;r>=0;r--){if(grid[r][col]===0){targetRow=r;break}}if(targetRow<0)return;var board=document.getElementById('board');var cells=board.children;var idx=targetRow*cols+col;var target=cells[idx].getBoundingClientRect();var br=board.getBoundingClientRect();var chip=document.createElement('div');chip.className='chip '+(turn===1?'p1':'p2');chip.style.transition='transform 300ms ease-in';chip.style.transform='translate('+(target.left-br.left+target.width/2)+'px,'+(-20)+'px)';board.appendChild(chip);animating=true;setTimeout(function(){chip.style.transform='translate('+(target.left-br.left+target.width/2)+'px,'+(target.top-br.top+target.height/2)+'px)';chip.addEventListener('transitionend',function(){board.removeChild(chip);grid[targetRow][col]=turn;render();if(checkWin()){over=true}else{turn=turn===1?2:1}setStatus();animating=false})},20)}
    function checkLine(a,b,c,d){return a&&a===b&&a===c&&a===d}
    function checkWin(){for(var r=0;r<rows;r++){for(var c=0;c<cols;c++){var v=grid[r][c];if(!v)continue;if(c+3<cols&&checkLine(v,grid[r][c+1],grid[r][c+2],grid[r][c+3]))return true;if(r+3<rows&&checkLine(v,grid[r+1][c],grid[r+2][c],grid[r+3][c]))return true;if(r+3<rows&&c+3<cols&&checkLine(v,grid[r+1][c+1],grid[r+2][c+2],grid[r+3][c+3]))return true;if(r-3>=0&&c+3<cols&&checkLine(v,grid[r-1][c+1],grid[r-2][c+2],grid[r-3][c+3]))return true}}return false}
    document.addEventListener('click',function(e){var t=e.target.closest('.cell');if(!t)return;drop(parseInt(t.dataset.col))})
    document.getElementById('reset').addEventListener('click',function(e){e.preventDefault();reset()})
    reset()
  </script>
</body>
</html>